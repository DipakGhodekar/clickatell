#!/usr/bin/env ruby
require 'pp'

local_libs = [
 File.join(File.dirname(__FILE__), *%w[../lib/clickatell]),
 File.join(File.dirname(__FILE__), *%w[../lib/clickatell/utility]) 
]

if File.exist?(local_libs.first)
  local_libs.each { |lib| require lib }
else
  require 'rubygems'
  require 'clickatell'
  require 'clickatell/utility'
end

options = Clickatell::Utility::Options.parse(ARGV)
connection = Clickatell::Connection.new(options.api_key, options.username, options.password)

puts "Sending '#{options.message}' to #{options.recipient}."
connection.send_message(options.recipient, options.message)
puts "Done."
exit 0